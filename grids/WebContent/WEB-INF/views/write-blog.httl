<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>写博客</title>
	<link href="$!{rs}/css/bootstrap.css" rel="stylesheet" type="text/css" media="screen" />
	<style type="text/css">
	body>.container{
		margin-top: 40px;
	}
	.blog {
		margin: 20px;
	}
	.blog .title{
		height: 1em;
	}
	.blog .content{
		min-height: 30em;
	}
	</style>
</head>
<body>
$!{include("navbar.httl")}
<div class="container" id="container">
	<div class="row">
		<form class="blog span9">
			<div class="row"><textarea class="title span9"></textarea></div>
			<div class="row"><textarea class="content span9"></textarea></div>
			<div class="row">
					<button class="btn btn-small">标签1</button>
					<button class="btn btn-small">标签2</button>
					<button class="btn btn-small">标签3</button>
					<button class="btn btn-primary pull-right" type="submit">发表</button>
			</div>
		</form>
	</div>
</div>
<div class="footer"></div>

<script src="$!{rs}/js/jquery-1.9.1.js" type="text/javascript"></script>
<script type="text/javascript">
	$('.blog button[type=submit]').click(function(event){
		event.preventDefault();
		var $submit = $(this);
		$submit.prop('disabled', true);
		$.post('/grids/post/blog', {
			title: $('.blog .title').val(),
			content: $('.blog .content').val(),
			tagIds: []
		})
		.always(function(resp){
			$submit.prop('disabled', false);
		})
		.done(function(resp){
			$('.blog .content').val('发表成功！');
		})
		.fail(function(resp){
			window.alert("post failed! " + resp);
		});
	});
</script>
</body>
</html>