<!DOCTYPE html>
<html>
#set(components = ["bootstrap", "markdown", "layout", "tag", "post-box", "write-blog"])
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>写博客</title>
    $!{includeCSS()}
	<style type="text/css">
	body>.container{
		margin-top: 40px;
	}
	.blog {
		margin: 20px;
	}
	.blog .title{
		height: 1em;
	}
	.blog .content{
		min-height: 30em;
	}
	</style>
</head>
<body>
$!{include("navbar.httl")}
<div class="container" id="container">
	<div class="row">
		<span id="user-self-json" style="display:none;">${selfJson}</span>
		<span id="tag-tree-json" style="display:none;">${tagTreeJson}</span>
		<form class="blog span9">
			<div class="row"><textarea class="title span9" placeholder="这里是标题"></textarea></div>
			<div class="row"><textarea class="content span9" placeholder="这里是内容"></textarea></div>
			<div class="row">
					<a class="tag-plus btn btn-info">+</a>
					<button class="btn btn-primary pull-right" type="submit">发表</button>
			</div>
		</form>
	</div>
	<div class="row">
	   <button id="refresh" class="btn">预览</button>
	   <div id="preview"></div>
	</div>
</div>
<div class="footer"></div>

$!{include("proto.httl")}
$!{includeJS()}
<script type="text/javascript">
function refresh() {
    console.log('refresh');
    var input = $('.blog .content').val();
    $('#preview').html(markdown.toHTML(input));
}
$(document).ready(function(){
   $('#refresh').click(refresh); 
});
</script>
</body>
</html>